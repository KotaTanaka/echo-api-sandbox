openapi: 3.0.0
info:
  title: Find Wifi API
  version: "0.01"
  description: |-
    # Introduction
    Find Wi-Fi のAPI仕様書です。

    <h2>For クライアント</h2>
    <table>
      <thead>
        <th>No.</th><th>Group</th><th>Method</th><th>Path</th><th>API名称</th>
      </thead>
      <tbody>
        <tr><td>CS01</td><td>Shop</td><td>GET</td><td>/shops</td><td>エリアに紐付く店舗一覧取得</td></tr>
        <tr><td>CR01</td><td>Review</td><td>GET</td><td>/reviews</td><td>店舗に紐付くレビュー一覧取得</td></tr>
        <tr><td>CR02</td><td>Review</td><td>POST</td><td>/reviews</td><td>店舗へのレビュー投稿</td></tr>
      </tbody>
    </table>

    <h2>For 管理画面・スクレイピング</h2>
    <table>
      <thead>
        <th>No.</th><th>Group</th><th>Method</th><th>Path</th><th>API名称</th>
      </thead>
      <tbody>
        <tr><td>AW01</td><td>Service</td><td>GET</td><td>/admin/services</td><td>Wi-Fiサービス一覧取得・検索</td></tr>
        <tr><td>AW02</td><td>Service</td><td>GET</td><td>/admin/services/:serviceId</td><td>Wi-Fiサービス詳細取得</td></tr>
        <tr><td>AW03</td><td>Service</td><td>POST</td><td>/admin/services</td><td>Wi-Fiサービス登録</td></tr>
        <tr><td>AW04</td><td>Service</td><td>PUT</td><td>/admin/services/:serviceId</td><td>Wi-Fiサービス編集</td></tr>
        <tr><td>AW05</td><td>Service</td><td>DELETE</td><td>/admin/services/:serviceId</td><td>Wi-Fiサービス削除</td></tr>
        <tr><td>AS01</td><td>Shop</td><td>GET</td><td>/admin/shops</td><td>店舗一覧取得・検索</td></tr>
        <tr><td>AS02</td><td>Shop</td><td>GET</td><td>/admin/shops/:shopId</td><td>店舗詳細取得</td></tr>
        <tr><td>AS03</td><td>Shop</td><td>POST</td><td>/admin/shops</td><td>店舗登録</td></tr>
        <tr><td>AS04</td><td>Shop</td><td>PUT</td><td>/admin/shops/:shopId</td><td>店舗編集</td></tr>
        <tr><td>AS05</td><td>Shop</td><td>DELETE</td><td>/admin/shops/:shopId</td><td>店舗削除</td></tr>
        <tr><td>AR01</td><td>Review</td><td>GET</td><td>/admin/reviews</td><td>レビュー一覧取得・検索</td></tr>
        <tr><td>AR02</td><td>Review</td><td>PUT</td><td>/admin/reviews/:reviewId</td><td>レビューステータス変更</td></tr>
        <tr><td>AR03</td><td>Review</td><td>DELETE</td><td>/admin/reviews/:reviewId</td><td>レビュー削除</td></tr>
      </tbody>
    </table>
servers:
  - url: http://localhost:1323
    description: ローカル
tags:
  - name: Shop
    description: 店舗関連 クライアント用API
  - name: Review
    description: レビュー関連 クライアント用API
  - name: Admin Service
    description: Wi-Fiサービス関連 管理画面・スクレイピング用API
  - name: Admin Shop
    description: 店舗関連 管理画面・スクレイピング用API
  - name: Admin Review
    description: レビュー関連 管理画面・スクレイピング用API
x-tagGroups:
  - name: Client
    tags:
      - Shop
      - Review
  - name: Admin
    tags:
      - Admin Service
      - Admin Shop
      - Admin Review

paths:
  /shops:
    # ------------------------------
    # GET /shops エリアに紐付く店舗一覧取得
    # ------------------------------
    get:
      tags:
        - Shop
      summary: エリアに紐付く店舗一覧取得
      operationId: getShopListClient
      description: |-
        指定地域のWi-Fi利用可能店舗一覧を取得する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl 'http://localhost:1323/shops?area=dogenzaka&hasPower=true&limit=10&offset=10'
      parameters:
        - $ref: "#/components/parameters/Area"
        - $ref: "#/components/parameters/HasPowerQuery"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - $ref: "#/components/parameters/Sort"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                description: 店舗一覧取得レスポンス
                type: object
                required:
                  - shopList
                  - total
                properties:
                  shopList:
                    type: array
                    description: 店舗リスト
                    items:
                      type: object
                      required:
                        - shopId
                        - wifiName
                        - serviceLink
                        - shopName
                        - area
                        - description
                        - address
                        - access
                        - ssid
                        - shopType
                        - openingHours
                        - seatsNum
                        - hasPower
                        - reviewCount
                        - average
                      properties:
                        shopId:
                          $ref: "#/components/schemas/ShopID"
                        wifiName:
                          $ref: "#/components/schemas/WifiName"
                        serviceLink:
                          $ref: "#/components/schemas/Link"
                        shopName:
                          $ref: "#/components/schemas/ShopName"
                        area:
                          $ref: "#/components/schemas/Area"
                        description:
                          $ref: "#/components/schemas/Description"
                        address:
                          $ref: "#/components/schemas/Address"
                        access:
                          $ref: "#/components/schemas/Access"
                        ssid:
                          $ref: "#/components/schemas/SSID"
                        shopType:
                          $ref: "#/components/schemas/ShopType"
                        openingHours:
                          $ref: "#/components/schemas/OpeningHours"
                        seatsNum:
                          $ref: "#/components/schemas/SeatsNum"
                        hasPower:
                          $ref: "#/components/schemas/HasPower"
                        reviewCount:
                          $ref: "#/components/schemas/ReviewCount"
                        average:
                          $ref: "#/components/schemas/Average"
                  total:
                    $ref: "#/components/schemas/Total"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

  /reviews:
    # ------------------------------
    # GET /reviews 店舗に紐付くレビュー一覧取得
    # ------------------------------
    get:
      tags:
        - Review
      summary: 店舗に紐付くレビュー一覧取得
      operationId: getReviewListClient
      description: |-
        店舗に紐付くレビューの一覧を取得する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl 'http://localhost:1323/admin/reviews?shopId=6aa3b8b5-1b5c-40c7-85cc-1cde056eb4c2&limit=10&offset=10&sort=desc'
      parameters:
        - $ref: "#/components/parameters/ShopIDQuery"
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - $ref: "#/components/parameters/Sort"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                description: レビュー一覧取得レスポンス
                type: object
                required:
                  - shopId
                  - shopName
                  - serviceId
                  - wifiName
                  - average
                  - reviewList
                  - total
                properties:
                  shopId:
                    $ref: "#/components/schemas/ShopID"
                  shopName:
                    $ref: "#/components/schemas/ShopName"
                  serviceId:
                    $ref: "#/components/schemas/ServiceID"
                  wifiName:
                    $ref: "#/components/schemas/WifiName"
                  average:
                    $ref: "#/components/schemas/Average"
                  reviewList:
                    type: array
                    description: レビューリスト
                    items:
                      type: object
                      required:
                        - reviewId
                        - comment
                        - evaluation
                        - status
                        - createdAt
                      properties:
                        reviewId:
                          $ref: "#/components/schemas/ReviewID"
                        comment:
                          $ref: "#/components/schemas/Comment"
                        evaluation:
                          $ref: "#/components/schemas/Evaluation"
                        status:
                          $ref: "#/components/schemas/Status"
                        createdAt:
                          $ref: "#/components/schemas/CreatedAt"
                  total:
                    $ref: "#/components/schemas/Total"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

    # ------------------------------
    # POST /reviews 店舗へのレビュー投稿
    # ------------------------------
    post:
      tags:
        - Review
      summary: 店舗へのレビュー投稿
      operationId: postReviewClient
      description: |-
        Wi-Fi利用可能店舗にレビューを投稿する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl -X POST 'http://localhost:1323/reviews' \
              -H 'Contents-Type: application/json' \
              -d \
                '{
                  "shopId": "6aa3b8b5-1b5c-40c7-85cc-1cde056eb4c2",
                  "comment": "使いやすい",
                  "evaluation": 5
                }'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - shopId
                - comment
                - evaluation
              properties:
                shopId:
                  $ref: "#/components/schemas/ShopID"
                comment:
                  $ref: "#/components/schemas/Comment"
                evaluation:
                  $ref: "#/components/schemas/Evaluation"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - reviewId
                properties:
                  reviewId:
                    $ref: "#/components/schemas/ReviewID"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

  /admin/services:
    # ------------------------------
    # GET /admins/services Wi-Fiサービス一覧取得・検索
    # ------------------------------
    get:
      tags:
        - Admin Service
      summary: Wi-Fiサービス一覧取得・検索
      operationId: getServiceListAdmin
      description: |-
        Wi-Fiサービス一覧を取得する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl 'http://localhost:1323/admin/services?limit=10&offset=10&sort=desc'
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - $ref: "#/components/parameters/Sort"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                description: Wi-Fiサービス一覧取得レスポンス
                type: object
                required:
                  - serviceList
                  - total
                properties:
                  serviceList:
                    type: array
                    description: Wi-Fiサービスリスト
                    items:
                      type: object
                      required:
                        - serviceId
                        - wifiName
                        - link
                        - shopCount
                      properties:
                        serviceId:
                          $ref: "#/components/schemas/ServiceID"
                        wifiName:
                          $ref: "#/components/schemas/WifiName"
                        link:
                          $ref: "#/components/schemas/Link"
                        shopCount:
                          $ref: "#/components/schemas/ShopCount"
                  total:
                    $ref: "#/components/schemas/Total"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

    # ------------------------------
    # POST /admin/services Wi-Fiサービス登録
    # ------------------------------
    post:
      tags:
        - Admin Service
      summary: Wi-Fiサービス登録
      operationId: postServiceAdmin
      description: |-
        Wi-Fiサービスを登録する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl -X POST 'http://localhost:1323/admin/services' \
              -H 'Contents-Type: application/json' \
              -d \
                '{
                  "wifiName": "スターバックスWi-Fi",
                  "link": "https://www.starbucks.co.jp"
                }'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - wifiName
                - link
              properties:
                wifiName:
                  $ref: "#/components/schemas/WifiName"
                link:
                  $ref: "#/components/schemas/Link"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - serviceId
                properties:
                  serviceId:
                    $ref: "#/components/schemas/ServiceID"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

  /admin/services/{serviceId}:
    # ------------------------------
    # GET /admins/services/:serviceId Wi-Fiサービス詳細取得
    # ------------------------------
    get:
      tags:
        - Admin Service
      summary: Wi-Fiサービス詳細取得
      operationId: getServiceAdmin
      description: |-
        Wi-Fiサービスの情報および紐付く店舗の一覧を取得を取得する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl 'http://localhost:1323/admin/services/starbacks_wifi?shopLimit=10&shopOffset=10'
      parameters:
        - $ref: "#/components/parameters/ServiceIDPath"
        - name: shopLimit
          $ref: "#/components/parameters/Limit"
        - name: shopOffset
          $ref: "#/components/parameters/Offset"
        - name: shopSort
          $ref: "#/components/parameters/Sort"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                description: Wi-Fiサービス詳細取得レスポンス
                type: object
                required:
                  - serviceId
                  - wifiName
                  - link
                  - createdAt
                  - updatedAt
                  - deletedAt
                  - shopCount
                  - shopList
                properties:
                  serviceId:
                    $ref: "#/components/schemas/ServiceID"
                  wifiName:
                    $ref: "#/components/schemas/WifiName"
                  link:
                    $ref: "#/components/schemas/Link"
                  createdAt:
                    $ref: "#/components/schemas/CreatedAt"
                  updatedAt:
                    $ref: "#/components/schemas/UpdatedAt"
                  deletedAt:
                    $ref: "#/components/schemas/DeletedAt"
                  shopCount:
                    $ref: "#/components/schemas/ShopCount"
                  shopList:
                    type: array
                    description: 店舗リスト
                    items:
                      type: object
                      required:
                        - shopId
                        - shopName
                        - area
                        - description
                        - address
                        - access
                        - ssid
                        - shopType
                        - openingHours
                        - seatsNum
                        - hasPower
                        - reviewCount
                        - average
                      properties:
                        shopId:
                          $ref: "#/components/schemas/ShopID"
                        shopName:
                          $ref: "#/components/schemas/ShopName"
                        area:
                          $ref: "#/components/schemas/Area"
                        description:
                          $ref: "#/components/schemas/Description"
                        address:
                          $ref: "#/components/schemas/Address"
                        access:
                          $ref: "#/components/schemas/Access"
                        ssid:
                          $ref: "#/components/schemas/SSID"
                        shopType:
                          $ref: "#/components/schemas/ShopType"
                        openingHours:
                          $ref: "#/components/schemas/OpeningHours"
                        seatsNum:
                          $ref: "#/components/schemas/SeatsNum"
                        hasPower:
                          $ref: "#/components/schemas/HasPower"
                        reviewCount:
                          $ref: "#/components/schemas/ReviewCount"
                        average:
                          $ref: "#/components/schemas/Average"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

    # ------------------------------
    # PUT /admin/services/:serviceId Wi-Fiサービス編集
    # ------------------------------
    put:
      tags:
        - Admin Service
      summary: Wi-Fiサービス編集
      operationId: putServiceAdmin
      description: |-
        Wi-Fiサービスの情報を編集する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl -X PUT 'http://localhost:1323/admin/services/1' \
              -H 'Contents-Type: application/json' \
              -d \
                '{
                  "wifiName": "スターバックスWi-Fi",
                  "link": "https://www.starbucks.co.jp"
                }'
      parameters:
        - $ref: "#/components/parameters/ServiceIDPath"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                wifiName:
                  $ref: "#/components/schemas/WifiName"
                link:
                  $ref: "#/components/schemas/Link"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - serviceId
                properties:
                  serviceId:
                    $ref: "#/components/schemas/ServiceID"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

    # ------------------------------
    # DELETE /admin/services/:serviceId Wi-Fiサービス削除
    # ------------------------------
    delete:
      tags:
        - Admin Service
      summary: Wi-Fiサービス削除
      operationId: deleteServiceAdmin
      description: |-
        Wi-Fiサービスを削除する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl -X DELETE 'http://localhost:1323/admin/services/1'
      parameters:
        - $ref: "#/components/parameters/ServiceIDPath"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - serviceId
                properties:
                  serviceId:
                    $ref: "#/components/schemas/ServiceID"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

  /admin/shops:
    # ------------------------------
    # GET /admin/shops 店舗一覧取得・検索
    # ------------------------------
    get:
      tags:
        - Admin Shop
      summary: 店舗一覧取得・検索
      operationId: getShopListAdmin
      description: |-
        全体のWi-Fi利用可能店舗一覧を取得する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl 'http://localhost:1323/admin/shops?limit=10&offset=10'
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - $ref: "#/components/parameters/Sort"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                description: 店舗一覧取得レスポンス
                type: object
                required:
                  - shopList
                  - total
                properties:
                  shopList:
                    type: array
                    description: 店舗リスト
                    items:
                      type: object
                      required:
                        - shopId
                        - serviceId
                        - wifiName
                        - shopName
                        - area
                        - description
                        - address
                        - access
                        - ssid
                        - shopType
                        - openingHours
                        - seatsNum
                        - hasPower
                        - reviewCount
                        - average
                      properties:
                        shopId:
                          $ref: "#/components/schemas/ShopID"
                        serviceId:
                          $ref: "#/components/schemas/ServiceID"
                        wifiName:
                          $ref: "#/components/schemas/WifiName"
                        shopName:
                          $ref: "#/components/schemas/ShopName"
                        area:
                          $ref: "#/components/schemas/Area"
                        description:
                          $ref: "#/components/schemas/Description"
                        address:
                          $ref: "#/components/schemas/Address"
                        access:
                          $ref: "#/components/schemas/Access"
                        ssid:
                          $ref: "#/components/schemas/SSID"
                        shopType:
                          $ref: "#/components/schemas/ShopType"
                        openingHours:
                          $ref: "#/components/schemas/OpeningHours"
                        seatsNum:
                          $ref: "#/components/schemas/SeatsNum"
                        hasPower:
                          $ref: "#/components/schemas/HasPower"
                        reviewCount:
                          $ref: "#/components/schemas/ReviewCount"
                        average:
                          $ref: "#/components/schemas/Average"
                  total:
                    $ref: "#/components/schemas/Total"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

    # ------------------------------
    # POST /admin/shops 店舗登録
    # ------------------------------
    post:
      tags:
        - Admin Shop
      summary: 店舗登録
      operationId: postShopAdmin
      description: |-
        Wi-Fi利用可能店舗を登録する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl -X POST 'http://localhost:1323/admin/shops' \
              -H 'Contents-Type: application/json' \
              -d \
                '{
                  "serviceId": 1,
                  "shopName": "スターバックスWi-Fi",
                  "area": "dogenzaka",
                  "description": "Wi-Fi・電源完備で、平日の昼間は比較的落ち着いています。",
                  "address": "東京都渋谷区1-1-1",
                  "access": "JR渋谷駅から徒歩1分"
                  "ssid": [
                    at_STARBUCKS_Wi2,
                  ],
                  "shopType": "cafe",
                  "openingHours": "9:00-22:00",
                  "seatsNum": 100,
                  "hasPower": true
                }'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - serviceId
                - shopName
                - area
                - address
                - ssid
              properties:
                serviceId:
                  $ref: "#/components/schemas/ServiceID"
                shopName:
                  $ref: "#/components/schemas/ShopName"
                area:
                  $ref: "#/components/schemas/Area"
                description:
                  $ref: "#/components/schemas/Description"
                address:
                  $ref: "#/components/schemas/Address"
                access:
                  $ref: "#/components/schemas/Access"
                ssid:
                  $ref: "#/components/schemas/SSID"
                shopType:
                  $ref: "#/components/schemas/ShopType"
                openingHours:
                  $ref: "#/components/schemas/OpeningHours"
                seatsNum:
                  $ref: "#/components/schemas/SeatsNum"
                hasPower:
                  $ref: "#/components/schemas/HasPower"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - serviceId
                properties:
                  serviceId:
                    $ref: "#/components/schemas/ServiceID"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

  /admin/shops/{shopId}:
    # ------------------------------
    # GET /admins/shops/:shopId 店舗詳細取得
    # ------------------------------
    get:
      tags:
        - Admin Shop
      summary: 店舗詳細取得
      operationId: getShopAdmin
      description: |-
        Wi-Fi利用可能店舗の情報および紐付くレビューの一覧を取得を取得する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl 'http://localhost:1323/admin/shops/6aa3b8b5-1b5c-40c7-85cc-1cde056eb4c2?reviewLimit=10&reviewOffset=10'
      parameters:
        - $ref: "#/components/parameters/ShopIDPath"
        - name: reviewLimit
          $ref: "#/components/parameters/Limit"
        - name: reviewOffset
          $ref: "#/components/parameters/Offset"
        - name: reviewSort
          $ref: "#/components/parameters/Sort"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                description: 店舗詳細取得レスポンス
                type: object
                required:
                  - shopId
                  - serviceId
                  - wifiName
                  - shopName
                  - area
                  - description
                  - address
                  - access
                  - ssid
                  - shopType
                  - openingHours
                  - seatsNum
                  - createdAt
                  - updatedAt
                  - deletedAt
                  - reviewCount
                  - reviewList
                  - average
                properties:
                  shopId:
                    $ref: "#/components/schemas/ShopID"
                  serviceId:
                    $ref: "#/components/schemas/ServiceID"
                  wifiName:
                    $ref: "#/components/schemas/WifiName"
                  shopName:
                    $ref: "#/components/schemas/ShopName"
                  area:
                    $ref: "#/components/schemas/Area"
                  description:
                    $ref: "#/components/schemas/Description"
                  address:
                    $ref: "#/components/schemas/Address"
                  access:
                    $ref: "#/components/schemas/Access"
                  ssid:
                    $ref: "#/components/schemas/SSID"
                  shopType:
                    $ref: "#/components/schemas/ShopType"
                  openingHours:
                    $ref: "#/components/schemas/OpeningHours"
                  seatsNum:
                    $ref: "#/components/schemas/SeatsNum"
                  createdAt:
                    $ref: "#/components/schemas/CreatedAt"
                  updatedAt:
                    $ref: "#/components/schemas/UpdatedAt"
                  deletedAt:
                    $ref: "#/components/schemas/DeletedAt"
                  reviewCount:
                    $ref: "#/components/schemas/ShopCount"
                  reviewList:
                    type: array
                    description: レビューリスト
                    items:
                      type: object
                      required:
                        - reviewId
                        - comment
                        - evaluation
                        - status
                        - createdAt
                        - updatedAt
                        - deletedAt
                      properties:
                        reviewId:
                          $ref: "#/components/schemas/ReviewID"
                        comment:
                          $ref: "#/components/schemas/Comment"
                        evaluation:
                          $ref: "#/components/schemas/Evaluation"
                        status:
                          $ref: "#/components/schemas/Status"
                        createdAt:
                          $ref: "#/components/schemas/CreatedAt"
                        updatedAt:
                          $ref: "#/components/schemas/UpdatedAt"
                        deletedAt:
                          $ref: "#/components/schemas/DeletedAt"
                  average:
                    $ref: "#/components/schemas/Average"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

    # ------------------------------
    # PUT /admin/shops/:shopId 店舗編集
    # ------------------------------
    put:
      tags:
        - Admin Shop
      summary: 店舗編集
      operationId: putShopAdmin
      description: |-
        Wi-Fi利用可能店舗の情報を編集する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl -X PUT 'http://localhost:1323/admin/services/6aa3b8b5-1b5c-40c7-85cc-1cde056eb4c2' \
              -H 'Contents-Type: application/json' \
              -d \
                '{
                  "serviceId": 1,
                  "shopName": "スターバックスWi-Fi",
                  "area": "dogenzaka",
                  "description": "Wi-Fi・電源完備で、平日の昼間は比較的落ち着いています。",
                  "address": "東京都渋谷区1-1-1",
                  "access": "JR渋谷駅から徒歩1分",
                  "ssid": [
                    at_STARBUCKS_Wi2,
                  ],
                  "shopType": "cafe",
                  "openingHours": "9:00-22:00",
                  "seatsNum": 100,
                  "hasPower": true
                }'
      parameters:
        - $ref: "#/components/parameters/ShopIDPath"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                shopName:
                  $ref: "#/components/schemas/ShopName"
                area:
                  $ref: "#/components/schemas/Area"
                description:
                  $ref: "#/components/schemas/Description"
                address:
                  $ref: "#/components/schemas/Address"
                access:
                  $ref: "#/components/schemas/Access"
                ssid:
                  $ref: "#/components/schemas/SSID"
                shopType:
                  $ref: "#/components/schemas/ShopType"
                openingHours:
                  $ref: "#/components/schemas/OpeningHours"
                seatsNum:
                  $ref: "#/components/schemas/SeatsNum"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - serviceId
                properties:
                  shopId:
                    $ref: "#/components/schemas/ServiceID"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

    # ------------------------------
    # DELETE /admin/shops/:shopId 店舗削除
    # ------------------------------
    delete:
      tags:
        - Admin Shop
      summary: 店舗削除
      operationId: deleteShopAdmin
      description: |-
        Wi-Fi利用可能店舗を削除する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl -X DELETE 'http://localhost:1323/admin/shops/6aa3b8b5-1b5c-40c7-85cc-1cde056eb4c2'
      parameters:
        - $ref: "#/components/parameters/ShopIDPath"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - serviceId
                properties:
                  shopId:
                    $ref: "#/components/schemas/ShopID"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

  /admin/reviews:
    # ------------------------------
    # GET /admins/reviews レビュー一覧取得・検索
    # ------------------------------
    get:
      tags:
        - Admin Review
      summary: レビュー一覧取得・検索
      operationId: getReviewListAdmin
      description: |-
        全体のレビューの一覧を取得する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl 'http://localhost:1323/admin/reviews?limit=10&offset=10&sort=desc'
      parameters:
        - $ref: "#/components/parameters/Limit"
        - $ref: "#/components/parameters/Offset"
        - $ref: "#/components/parameters/Sort"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                description: レビュー一覧取得レスポンス
                type: object
                required:
                  - reviewList
                  - total
                properties:
                  reviewList:
                    type: array
                    description: レビューリスト
                    items:
                      type: object
                      required:
                        - reviewId
                        - shopId
                        - shopName
                        - serviceId
                        - wifiName
                        - comment
                        - evaluation
                        - status
                        - createdAt
                        - updatedAt
                        - deletedAt
                      properties:
                        reviewId:
                          $ref: "#/components/schemas/ReviewID"
                        shopId:
                          $ref: "#/components/schemas/ShopID"
                        shopName:
                          $ref: "#/components/schemas/ShopName"
                        serviceId:
                          $ref: "#/components/schemas/ServiceID"
                        wifiName:
                          $ref: "#/components/schemas/WifiName"
                        comment:
                          $ref: "#/components/schemas/Comment"
                        evaluation:
                          $ref: "#/components/schemas/Evaluation"
                        status:
                          $ref: "#/components/schemas/Status"
                        createdAt:
                          $ref: "#/components/schemas/CreatedAt"
                        updatedAt:
                          $ref: "#/components/schemas/UpdatedAt"
                        deletedAt:
                          $ref: "#/components/schemas/DeletedAt"
                  total:
                    $ref: "#/components/schemas/Total"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

  /admin/reviews/{reviewId}:
    # ------------------------------
    # PUT /admin/reviews/:reviewId/status レビューステータス変更
    # ------------------------------
    put:
      tags:
        - Admin Review
      summary: レビューステータス変更
      operationId: putShopAdminStatus
      description: |-
        レビューの公開/非公開ステータスを変更する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl -X PUT 'http://localhost:1323/admin/reviews/875c1d576d44e47a38c5b74ece39a709' \
              -H 'Contents-Type: application/json' \
              -d \
                '{
                  "status": "hidden"
                }'
      parameters:
        - $ref: "#/components/parameters/ReviewIDPath"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - status
              properties:
                status:
                  $ref: "#/components/schemas/Status"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - reviewId
                properties:
                  reviewId:
                    $ref: "#/components/schemas/ReviewID"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

    # ------------------------------
    # DELETE /admin/reviews/:reviewId レビュー削除
    # ------------------------------
    delete:
      tags:
        - Admin Review
      summary: レビュー削除
      operationId: deleteShopAdmin
      description: |-
        レビューを削除する。
      x-code-samples:
        - lang: Shell
          label: cURL
          source: |
            curl -X DELETE 'http://localhost:1323/admin/reviews/875c1d576d44e47a38c5b74ece39a709'
      parameters:
        - $ref: "#/components/parameters/ReviewIDPath"
      responses:
        200:
          description: 成功時のレスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - reviewId
                properties:
                  reviewId:
                    $ref: "#/components/schemas/ReviewID"
        400:
          description: パラメータ不正
        500:
          description: システムエラー

components:
  # ------------------------------
  # Query or Path Parameters
  # ------------------------------
  parameters:
    Limit:
      in: query
      name: limit
      description: リミット(取得件数) ※デフォルトは20
      schema:
        type: number
        format: 数字
        example: 10
    Offset:
      in: query
      name: offset
      description: オフセット(ページの開始位置) ※デフォルトは0
      schema:
        type: number
        format: 数字
        example: 10
    Sort:
      in: query
      name: sort
      description: |
        ソート方法 ※デフォルトは降順
        * asc: 昇順
        * desc: 降順
      schema:
        type: string
        format: asc / desc
        example: asc
    Area:
      in: query
      name: area
      description: 検索エリア
      required: true
      schema:
        type: string
        format: 半角英数字
        example: "dogenzaka"
    ShopIDQuery:
      in: query
      name: shopId
      description: 店舗ID
      required: true
      schema:
        $ref: "#/components/schemas/ShopID"
    HasPowerQuery:
      in: query
      name: hasPower
      description: 電源の有無
      schema:
        $ref: "#/components/schemas/HasPower"
    ServiceIDPath:
      in: path
      name: serviceId
      description: Wi-FiサービスID
      required: true
      schema:
        $ref: "#/components/schemas/ServiceID"
    ShopIDPath:
      in: path
      name: shopId
      description: 店舗ID
      required: true
      schema:
        $ref: "#/components/schemas/ShopID"
    ReviewIDPath:
      in: path
      name: reviewId
      description: レビューID
      required: true
      schema:
        $ref: "#/components/schemas/ReviewID"
  # ------------------------------
  # Request Body Parameters / Response Body Fields
  # ------------------------------
  schemas:
    Total:
      description: 総数
      type: number
      format: 数字
      example: 50
    CreatedAt:
      description: 作成日時(登録日時)
      type: string
      format: YYYY-MM-DD HH:mm:ss
      example: 2019-01-01 12:00:00
    UpdatedAt:
      description: 更新日時
      type: string
      format: YYYY-MM-DD HH:mm:ss
      example: 2019-01-01 12:00:00
    DeletedAt:
      description: 削除日時(削除されていなければ `null` )
      type: string
      format: YYYY-MM-DD HH:mm:ss
      example: 2019-01-01 12:00:00
    ServiceID:
      description: Wi-FiサービスID
      type: number
      format: 整数(AutoIncrement)
      example: 1
    WifiName:
      description: Wi-Fiサービス名
      type: string
      format: 半角英数字
      example: スターバックスWi-Fi
    Link:
      description: 公式サイトへのリンク
      type: string
      format: URL
      example: https://www.starbucks.co.jp
    ShopCount:
      description: 店舗数
      type: number
      format: 数値
      example: 10
    ShopID:
      description: 店舗ID
      type: number
      format: 整数(AutoIncrement)
      example: 1
    ShopName:
      description: 店舗名
      type: string
      format: 文字列
      example: スターバックス渋谷店
    Area:
      description: 店舗エリア
      type: string
      format: 半角英数字
      example: "dogenzaka"
    Description:
      description: 店舗説明
      type: string
      format: 文字列
      example: Wi-Fi・電源完備で、平日の昼間は比較的落ち着いています。
    Address:
      description: 店舗住所
      type: string
      format: 文字列
      example: 東京都渋谷区道玄坂1-1-1
    Access:
      description: 店舗アクセス
      type: string
      format: 文字列
      example: JR渋谷駅から徒歩1分
    SSID:
      description: SSID
      type: array
      items:
        type: string
        format: 半角英数字
      example:
        - at_STARBUCKS_Wi2
    ShopType:
      description: 店舗種別
      type: string
      format: 半角英数字
      example: cafe
    OpeningHours:
      description: 営業時間
      type: string
      format: 文字列
      example: 9:00-22:00
    SeatsNum:
      description: 座席数
      type: number
      format: 数字
      example: 100
    HasPower:
      description: 電源の有無
      type: boolean
      format: 真理値
      example: true
    ReviewCount:
      description: レビュー数
      type: number
      format: 数字
      example: 10
    Average:
      description: 評価の平均値
      type: number
      format: 数値
      example: 3.50
    ReviewID:
      description: レビューID
      type: number
      format: 整数(AutoIncrement)
      example: 1
    Comment:
      description: レビュー本文
      type: string
      format: 文字列
      example: 使いやすい
    Evaluation:
      description: 評価
      type: number
      format: 数値
      enum: [1,2,3,4,5]
      example: 3
    Status:
      description: |-
        レビューの公開/非公開ステータス
        - 公開 `public`
        - 非公開 `hidden`
      type: string
      format: string
      enum: ["public", "hidden"]
      example: public
